"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class2,_class3,_temp,_createClass=function(){function l(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactOnclickoutside=require("react-onclickoutside"),_reactOnclickoutside2=_interopRequireDefault(_reactOnclickoutside),_icon=require("../icon"),_icon2=_interopRequireDefault(_icon),_button=require("../button"),_button2=_interopRequireDefault(_button),_href=require("./href"),_href2=_interopRequireDefault(_href),_language=require("./language"),_language2=_interopRequireDefault(_language);require("./style.css");var _style={personalImg:"personalImg__style___nw801",wrap:"wrap__style___hJ5Wk",userInfoPane:"userInfoPane__style___3ifRX",imgUser:"imgUser__style___1EZVj",editPortrait:"editPortrait__style___11EwE",imgOuter:"imgOuter__style___dsq39",new_name:"new_name__style___2VmVR",imgInner:"imgInner__style___1yiuS",userInfo:"userInfo__style___3xoCz",gloryValue:"gloryValue__style___2i7ON",packetsValue:"packetsValue__style___1Z_nE",gloryKey:"gloryKey__style___2NA0m",packetsKey:"packetsKey__style___2jk0n",loginOut:"loginOut__style___hqMXn",tabContent:"tabContent__style___2izPs",tabPane1:"tabPane1__style___2kaBl",tabPane2:"tabPane2__style___mPJnm",userName:"userName__style___3nw_w",gloryIcon:"gloryIcon__style___VJT1I",iconContainer:"iconContainer__style___1Y8lH",icon2:"icon2__style___2xR5X",icon3:"icon3__style___3KJAk",active:"active__style___1BRyT",wrapBtn:"wrapBtn__style___9mH4A",clearfix:"clearfix__style___1EGi_",userBtnList:"userBtnList__style___mnG2t",createBtnList:"createBtnList__style___2K2dm",serviceImg:"serviceImg__style___3VkS7",serviceName:"serviceName__style___1YkJZ",promotion:"promotion__style___2yJnY",used:"used__style___3I-S3",line_end:"line_end__style___3OVDf",recently:"recently__style___1dE9e",usedTit:"usedTit__style___1AuZE",lastTime:"lastTime__style___2-vbZ",usedService:"usedService__style___2b1kY",usedModule:"usedModule__style___3nequ",module:"module__style___2iJAq",usedIcon:"usedIcon__style___1seEC",defaultPic:"defaultPic__style___yRcwn",logOut:"logOut__style___IpWtJ",userSetting:"userSetting__style___3BhrU",tenantArea:"tenantArea__style___9e-08",tenantName:"tenantName__style___3Cy0z",tenantDescribe:"tenantDescribe__style___PRf-0",companyType:"companyType__style___WEy39",teamBtnList:"teamBtnList__style___2ZSgU",tenantPortrait:"tenantPortrait__style___3aCpi",popconfirm:"popconfirm__style___2eNyA",popconfirm_content:"popconfirm_content__style___itLmD",createBtn:"createBtn__style___2Xm1j",hiden:"hiden__style___2BOD_",show:"show__style___1HSxw",enter_setting:"enter_setting__style___1xgZc",linkSetting:"linkSetting__style___2atqj",language:"language__style___3XLNM"};function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Userinfo=(0,_reactOnclickoutside2.default)((_temp=_class3=function(e){function t(e){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.getIcon=function(e,t){var a=l.props.bgColor;return e?_react2.default.createElement("img",{alt:e,src:e,className:_style.imgInner}):_react2.default.createElement("div",{className:_style.defaultPic,style:t?{background:a}:{}},_react2.default.createElement(_icon2.default,{type:t?"group":"staff"}))},l.gotoConfig=function(){var e=l.props,t=e.titleType,a=e.dispatch;a("企业"===t?"openEntersetting":"openTeamconfig")},l.state={},l}return _inherits(t,_react.Component),_createClass(t,[{key:"componentWillMount",value:function(){}},{key:"handleClickOutside",value:function(){var e=this.props,t=e.closePersonalModal,a=e.userInfoDisplay;e.exitModal||a&&t()}},{key:"render",value:function(){var e=this,t=this.props,a=t.userInfo,l=a.userName,_=a.userAvator,n=a.admin,r=a.logo,s=a.company,o=a.currentTeamConfig,c=a.allowTenants,i=t.requestDisplay,u=t.hrefs,p=t.logout,f=t.editType,d=t.exitModalButton,y=t.titleType,m=t.dispatch,g=t.language,E=t.animatedType,h=!1,v="1";if(o){var b=o.allowExit,T=o.invitePermission;T&&"0"===T?h=n:T&&"1"===T&&(h=!0),v=b}var C=c.length<=0?_style.hiden:_style.show,N={left:0};return"Right"==E&&(N={right:0}),_react2.default.createElement("div",{id:"modalId",className:_style.wrap+" "+_style.clearfix,style:N},_react2.default.createElement("div",null,_react2.default.createElement("div",{className:_style.logOut,onClick:p},_react2.default.createElement(_icon2.default,{type:"exit"}),_react2.default.createElement("span",null,"注销")),g&&g.show?_react2.default.createElement(_language2.default,{defaultValue:g.defaultValue,onChangeLanguage:g.onChangeLanguage,languageList:g.languageList}):null,_react2.default.createElement("div",{className:_style.userInfoPane},_react2.default.createElement("div",{className:_style.imgUser},_react2.default.createElement("div",{className:_style.imgOuter},this.getIcon(_))),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:_style.new_name,title:l},l),_react2.default.createElement("div",{className:_style.userSetting,onClick:function(){m("openAccount")}},_react2.default.createElement(_icon2.default,{type:"copyreader"})),_react2.default.createElement("div",null,_react2.default.createElement("ul",{className:_style.gloryIcon+" "+_style.clearfix},_react2.default.createElement("li",{onClick:function(){m("openDynamic")}},_react2.default.createElement("div",{className:_style.iconContainer+" "+_style.icon3},_react2.default.createElement(_icon2.default,{title:"动态",type:"Internet2"})))))))),_react2.default.createElement("div",{className:_style.tenantArea+" "+C},_react2.default.createElement("div",{className:_style.clearfix},_react2.default.createElement("div",{className:_style.tenantPortrait},_react2.default.createElement("div",{className:_style.imgOuter},this.getIcon(r,!0))),_react2.default.createElement("div",{className:_style.tenantDescribe},_react2.default.createElement("div",{className:_style.tenantName,title:s},s),_react2.default.createElement("div",{style:{marginBottom:15}},_react2.default.createElement("div",{className:_style.companyType},y)))),_react2.default.createElement("div",{style:{position:"relative"}},_react2.default.createElement("ul",{className:_style.teamBtnList+" "+_style.userBtnList+" "+_style.clearfix},f?_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{shape:"border",onClick:function(){m("openManage")}},_react2.default.createElement(_icon2.default,{type:"record"}),"首页编辑")):null,"企业"==y?_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{shape:"border",onClick:function(){m("openUserinfo")}},_react2.default.createElement(_icon2.default,{type:"role-management"}),"员工信息")):null,h?_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{shape:"border",size:"sm",onClick:function(){m("openInvitation")}},_react2.default.createElement(_icon2.default,{type:"add-friends"}),"邀请成员")):null,n||"0"===v||!d?null:_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{shape:"border",onClick:this.props.openExitModal},_react2.default.createElement(_icon2.default,{type:"staff"}),"退出"+y))),i?_react2.default.createElement("div",{className:_style.popconfirm,style:{position:"absolute"}},_react2.default.createElement("i",{className:"arrow"}),_react2.default.createElement("div",{className:_style.popconfirm_content},_react2.default.createElement("p",null,y,"创建成功！"),_react2.default.createElement("p",null,"快点邀请成员一起好好工作吧！")),_react2.default.createElement("div",{onClick:this.props.closeRequestDisplay},"我知道了")):null),_react2.default.createElement("div",{className:_style.enter_setting,title:y+"设置"},n?_react2.default.createElement(_icon2.default,{type:"setting",title:y+"设置",onClick:function(){e.gotoConfig()}}):null)),_react2.default.createElement("div",{className:_style.linkSetting},_react2.default.createElement(_href2.default,{hrefs:u})))}}]),t}(),_class3.propTypes={editType:_propTypes2.default.bool,exitModalButton:_propTypes2.default.bool,requestDisplay:_propTypes2.default.bool,bgColor:_propTypes2.default.string,userInfoDisplay:_propTypes2.default.bool,exitModal:_propTypes2.default.bool,closePersonalModal:_propTypes2.default.func,dispatch:_propTypes2.default.func,logout:_propTypes2.default.func,titleType:_propTypes2.default.string,userInfo:_propTypes2.default.shape({userName:_propTypes2.default.string,userAvator:_propTypes2.default.string,admin:_propTypes2.default.bool,logo:_propTypes2.default.string,company:_propTypes2.default.string,currentTeamConfig:_propTypes2.default.object,allowTenants:_propTypes2.default.array}),hrefs:_propTypes2.default.arrayOf(_propTypes2.default.object),openExitModal:_propTypes2.default.func,closeRequestDisplay:_propTypes2.default.func,language:_propTypes2.default.shape({show:_propTypes2.default.bool,defaultValue:_propTypes2.default.string,onChangeLanguage:_propTypes2.default.func,languageList:_propTypes2.default.arrayOf(_propTypes2.default.object)})},_class3.defaultProps={editType:!0,exitModalButton:!0,requestDisplay:!1,bgColor:"RGBA(228, 97, 92, 1)",userInfoDisplay:!1,exitModal:!1,closePersonalModal:function(){},dispatch:function(){},logout:function(){},titleType:"团队",userInfo:{},hrefs:[],openExitModal:function(){},closeRequestDisplay:function(){},language:{show:!1,defaultValue:"zh",onChangeLanguage:function(){},languageList:[{value:"zh",context:"简体中文"},{value:"en",context:"English"},{value:"eh",context:"繁体中文"}]}},_class2=_temp))||_class2;exports.default=Userinfo,module.exports=exports.default;